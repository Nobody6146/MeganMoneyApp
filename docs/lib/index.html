<html lang="en">
    <head>
        <title>Hydrate Demo</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <script src="hydrate.js"></script>
        <style>
            .fontStyle {
                color: red;
            }
        </style>
    </head>
    <body>
        <h1>Hydrate Demo</h1>
        <div h-model="state" h-delete="delete" h-class="addStyle fontStyle" h-function="delete yellFunction how could you delete me!">
            <h2 h-model="state" h-attribute="greeting name" h-property="greeting innerHTML"></h2>
            <p>
                <span h-model="state.data.person.contact" h-property="firstName innerHTML"></span>
                <span h-model="state.data.person.contact" h-property="lastName innerHTML"></span>
                <div h-model="state" h-toggle="secret hidden">You this is a hidden div!</div>
            </p>
            <p h-model="state" h-property="message innerHTML"></p>
        </div>

        <button h-model="state" h-handler="click onclick">
            Click Me!
        </button>

        <input type="text" h-model="state" h-attribute="greeting value" h-input="greeting value" h-callback="greeting validateInput">
        
        <span hidden h-model="state" h-toggle="* hidden" h-condition="unbindOnly">Goodbye, model was unloaded</span>
        <script h-model="state" h-script="* innerText">
            (hydrateEvent) => {
                return hydrateEvent.type === "unbind";
            }
        </script>

        
        <script>
            let hydrate = new HydrateApp();
            hydrate.listen("state", (event) => console.log(event));
            hydrate.listen("state.data.person.contact", (event) => {console.log("wow!"); console.log(event)});
            let state = {greeting: "Hello world"};
            let model = hydrate.bind("state", state);
            model.data = {
                person: {
                    contact: {
                        firstName: "Bob",
                        lastName: "Builder"
                    }
                }
            };
            model.secret = true;
            model.click = (clickEvent, hydrateEvent) => {
                console.log("you clicked me!");
                console.log(hydrateEvent);
            }
            model.validateInput = (hydrateEvent, arg) => {
                console.log(`${hydrateEvent.propName} has been updated to: ${hydrateEvent.prop}`);
            }

            function yellFunction(hydrateEvent, arg) {
                console.log(arg);
            }
        </script>
    </body>
</html>